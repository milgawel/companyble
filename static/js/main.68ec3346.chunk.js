(this["webpackJsonpcompanies-table"]=this["webpackJsonpcompanies-table"]||[]).push([[0],{15:function(t,n,e){t.exports=e.p+"static/media/image.ed8573af.png"},17:function(t,n,e){t.exports=e(24)},24:function(t,n,e){"use strict";e.r(n);var a=e(0),r=e.n(a),o=e(11),c=e.n(o),i=e(16),l=e(3),u=e(4),s=e(7),m=e(6),d=e(1),f=e(2);function h(){var t=Object(d.a)(["\n\n  *,*::after,*::before{\n  margin:0;\n  padding:0;\n  box-sizing:border-box;\n  }\n\n  html{\n  font-family: 'Montserrat', sans-serif;\n    }\n  \n"]);return h=function(){return t},t}var p=Object(f.a)(h());function g(){var t=Object(d.a)(["\n  width: 100vw;\n  min-height: 100vh;\n  background-image: linear-gradient(to right bottom, #bb45ff, #f2d2d2);\n"]);return g=function(){return t},t}var b=f.b.div(g()),v=function(t){var n=t.children;return r.a.createElement(b,null,r.a.createElement(p,null),n)};function x(){var t=Object(d.a)(["\n  border-bottom: 2px solid white;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  background: lightgray;\n  font-size: 15px;\n  @media (max-width: 420px) {\n    padding-top: 3.5px;\n    padding-bottom: 3.5px;\n    font-size: 13.5px;\n  }\n"]);return x=function(){return t},t}var E=f.b.th(x()),I=function(t){var n=t.id,e=t.name,a=t.city,o=t.totalIncomes,c=t.avgIncomes,i=t.lastMonthIncomes;return r.a.createElement("tr",null,r.a.createElement(E,{style:{width:"10%"}},n),r.a.createElement(E,null,e),r.a.createElement(E,null,a),r.a.createElement(E,null,o),r.a.createElement(E,null,c),r.a.createElement(E,null,i))},y=e(15),w=e.n(y);function k(){var t=Object(d.a)(["\n  height: 22px;\n  transform: translateY(-2px);\n"]);return k=function(){return t},t}function C(){var t=Object(d.a)(["\n  width: 150px;\n  position: relative;\n  display: block;\n  margin-left: 10px;\n  margin-right: auto;\n  margin-top: 10px;\n  font-weight: bold;\n"]);return C=function(){return t},t}function j(){var t=Object(d.a)(["\n  color: black;\n  background-color: transparent;\n  width: 100%;\n  min-width: 60px;\n  padding: 5px;\n  text-align: center;\n  font-size: 15px;\n  border: none;\n  ::placeholder {\n    color: black;\n  }\n"]);return j=function(){return t},t}function O(){var t=Object(d.a)(["\n  border: 2px solid #334960;\n  padding: 5px 30px 5px 10px;\n  min-width: 60px;\n  cursor: pointer;\n  background-image: url(",");\n  background-repeat: no-repeat;\n  background-size: 23px;\n  background-position: 95% 50%;\n"]);return O=function(){return t},t}function S(){var t=Object(d.a)(["\n  background-image: linear-gradient(to bottom, #334960, lightgrey);\n"]);return S=function(){return t},t}function M(){var t=Object(d.a)(["\n  width: 100%;\n  background-color: #334960;\n  color: white;\n"]);return M=function(){return t},t}function F(){var t=Object(d.a)(["\n  min-width: 900px;\n  max-width: 1400px;\n  table-layout: fixed;\n  background-color: white;\n  padding: 10px;\n  border-radius: 5px;\n  border: 3px solid black;\n"]);return F=function(){return t},t}function A(){var t=Object(d.a)(["\n  width: 100%;\n  overflow-x: auto;\n"]);return A=function(){return t},t}function T(){var t=Object(d.a)(["\n  width: 100vw;\n  padding: 20px;\n  @media (max-width: 420px) {\n    padding: 10px;\n  }\n"]);return T=function(){return t},t}var z=f.b.div(T()),P=f.b.div(A()),D=f.b.table(F()),L=f.b.tr(M()),J=f.b.tr(S()),Y=f.b.th(O(),w.a),B=f.b.input(j()),q=f.b.p(C()),G=f.b.select(k()),H=function(t){Object(s.a)(e,t);var n=Object(m.a)(e);function e(){var t;Object(l.a)(this,e);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=n.call.apply(n,[this].concat(r))).state={id:!1,name:!0,city:!0,totalIncomes:!0,avgIncomes:!0,lastMonthIncomes:!0},t}return Object(u.a)(e,[{key:"render",value:function(){var t=this,n=this.props,e=n.children,a=n.sortingFunc,o=n.filterFunc,c=n.handleTablePage,i=n.positions/15,l=function(t){for(var n=[],e=1;e<t+1;e++)n.push(e);return n}(i);return r.a.createElement(z,null,r.a.createElement(P,null,r.a.createElement(D,null,r.a.createElement("tbody",null,r.a.createElement(L,null,r.a.createElement(Y,{style:{width:"7%"},"data-column":"id",onClick:function(n){var e=t.state.id?"+":"-";a(n,e),t.setState((function(t){return{id:!t.id}}))}},"id"),r.a.createElement(Y,{"data-column":"name",onClick:function(n){var e=t.state.name?"+":"-";a(n,e),t.setState((function(t){return{name:!t.name}}))}},"name"),r.a.createElement(Y,{style:{width:"20%"},"data-column":"city",onClick:function(n){var e=t.state.city?"+":"-";a(n,e),t.setState((function(t){return{city:!t.city}}))}},"city"),r.a.createElement(Y,{style:{width:"13%"},"data-column":"totalIncomes",onClick:function(n){var e=t.state.totalIncomes?"+":"-";a(n,e),t.setState((function(t){return{totalIncomes:!t.totalIncomes}}))}},"total income"),r.a.createElement(Y,{style:{width:"15%"},"data-column":"avgIncomes",onClick:function(n){var e=t.state.avgIncomes?"+":"-";a(n,e),t.setState((function(t){return{avgIncomes:!t.avgIncomes}}))}},"average income"),r.a.createElement(Y,{style:{width:"17%"},"data-column":"lastMonthIncomes",onClick:function(n){var e=t.state.lastMonthIncomes?"+":"-";a(n,e),t.setState((function(t){return{lastMonthIncomes:!t.lastMonthIncomes}}))}},"last month income")),r.a.createElement(J,null,r.a.createElement("th",null,r.a.createElement(B,{"data-filter":"id",onChange:function(t){return o(t)},placeholder:"filter"})),r.a.createElement("th",null,r.a.createElement(B,{"data-filter":"name",onChange:function(t){return o(t)},placeholder:"filter"})),r.a.createElement("th",null,r.a.createElement(B,{"data-filter":"city",onChange:function(t){return o(t)},placeholder:"filter"})),r.a.createElement("th",null,r.a.createElement(B,{"data-filter":"totalIncomes",onChange:function(t){return o(t)},placeholder:"filter"})),r.a.createElement("th",null,r.a.createElement(B,{"data-filter":"avgIncomes",onChange:function(t){return o(t)},placeholder:"filter"})),r.a.createElement("th",null,r.a.createElement(B,{"data-filter":"totalIncomes",onChange:function(t){return o(t)},placeholder:"filter"}))),e.map((function(t){return r.a.createElement(I,{key:t.id,id:t.id,name:t.name,city:t.city,incomes:t.incomes,totalIncomes:t.totalIncomes,avgIncomes:t.avgIncomes,lastMonthIncomes:t.lastMonthIncomes})}))))),r.a.createElement(q,null,"Page"," ",r.a.createElement(G,{id:"pages",onChange:c},l.map((function(t){return r.a.createElement("option",{value:15*t-15,key:t},t)})))," ","of ",i))}}]),e}(r.a.Component),K=function(t){Object(s.a)(e,t);var n=Object(m.a)(e);function e(){var t;Object(l.a)(this,e);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=n.call.apply(n,[this].concat(r))).state={companies:[],filteredCompanies:[],offset:0},t.calculateTotalIncomes=function(t){for(var n=0,e=0;e<t.length;e++)n+=parseFloat(t[e].value,10);return n=Math.round(100*n)/100},t.calculateAverageIncomes=function(t){for(var n=0,e=0;e<t.length;e++)n+=parseFloat(t[e].value,10);return n/=t.length,n=Math.round(100*n)/100},t.calculateLastMonthIncome=function(t){var n=0,e=new Date,a=e.getFullYear(),r=e.getMonth();r<10&&(r="0".concat(r));for(var o=0;o<t.length;o++){var c=t[o].date.substring(5,7),i=t[o].date.substring(0,4);c===r&&i===a&&(console.log("[year = thisyear]".concat(i," ===").concat(a)),console.log("[arrayOfIncomes[i].date] ".concat(t[o].date)),console.log("[month = actualMonth]".concat(c," ===").concat(r)),n+=parseFloat(t[o].value,10))}return n},t.fetchCompaniesDataFromServer=function(){fetch("https://recruitment.hal.skygate.io/companies").then((function(t){return t.json()})).then((function(n){var e=n;e.sort((function(t,n){return t.id-n.id||t.name.localeCompare(n.name)}));for(var a=function(a){fetch("https://recruitment.hal.skygate.io/incomes/".concat(n[a].id)).then((function(t){return t.json()})).then((function(n){e[a].incomes=Object(i.a)(n.incomes),e[a].totalIncomes=t.calculateTotalIncomes(e[a].incomes),e[a].avgIncomes=t.calculateAverageIncomes(e[a].incomes),e[a].lastMonthIncomes=t.calculateLastMonthIncome(e[a].incomes),t.setState({companies:e})})).catch((function(t){return console.log(t)}))},r=0;r<n.length;r++)a(r);t.setState({companies:e})})).catch((function(t){return console.log(t)}))},t.handleTablePage=function(n){t.setState({offset:parseInt(n.target.value)})},t.handleSorting=function(n,e){var a=n.target.getAttribute("data-column"),r=t.state.companies,o=t.state.filteredCompanies;function c(t){var n=1;return"-"===e&&(n=-1),function(e,a){return(e[t]<a[t]?-1:e[t]>a[t]?1:0)*n}}r.sort(c(a)),o.sort(c(a)),t.setState({companies:r,filteredCompanies:o})},t.handleInputFilter=function(n){var e=t.state.companies,a=n.target.value.toString().toLowerCase();console.log(a);var r=n.target.getAttribute("data-filter");if(a.length>0){var o=e.filter((function(t){return t[r].toString().toLowerCase().includes(a)}));t.setState({filteredCompanies:o})}else t.setState({filteredCompanies:[]})},t}return Object(u.a)(e,[{key:"componentDidMount",value:function(){this.fetchCompaniesDataFromServer()}},{key:"render",value:function(){var t=this.state,n=t.companies,e=t.filteredCompanies,a=t.offset;return r.a.createElement(v,null,r.a.createElement(H,{filterFunc:this.handleInputFilter,sortingFunc:this.handleSorting,positions:this.state.companies.length,handleTablePage:this.handleTablePage},e.length>0?e.slice(a,a+15):n.slice(a,a+15)))}}]),e}(r.a.Component);c.a.render(r.a.createElement(K,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.68ec3346.chunk.js.map